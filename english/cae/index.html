
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../aaw/">
      
      
        <link rel="next" href="../intro/">
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-9.0.9">
    
    
      
        <title>CAE - Geospatial Environment - Development Draft</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.0d440cfe.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.2505c338.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="green" data-md-color-accent="red">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#what-is-cae" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Geospatial Environment - Development Draft" class="md-header__button md-logo" aria-label="Geospatial Environment - Development Draft" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Geospatial Environment - Development Draft
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              CAE
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Geospatial Environment - Development Draft" class="md-nav__button md-logo" aria-label="Geospatial Environment - Development Draft" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    Geospatial Environment - Development Draft
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        About DAS GAE
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../faq/" class="md-nav__link">
        Contact
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../quick/" class="md-nav__link">
        Quick Start
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../login/" class="md-nav__link">
        Logging In
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../vm/" class="md-nav__link">
        Virtual Machine
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../postgresql/" class="md-nav__link">
        PostgreSQL + PostGIS
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
      
      
      
        <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
          ArcGIS ecosystem
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_7">
          <span class="md-nav__icon md-icon"></span>
          ArcGIS ecosystem
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../portal/" class="md-nav__link">
        ArcGIS Portal
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../pro/" class="md-nav__link">
        ArcGIS Pro
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../insights/" class="md-nav__link">
        ArcGIS Insights
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../qgis/" class="md-nav__link">
        QGIS
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9" checked>
      
      
      
        <label class="md-nav__link" for="__nav_9" id="__nav_9_label" tabindex="0">
          Cross-Platform (AAW/CAE)
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_9_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_9">
          <span class="md-nav__icon md-icon"></span>
          Cross-Platform (AAW/CAE)
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../aaw/" class="md-nav__link">
        AAW
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          CAE
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        CAE
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#connecting-to-arcgis-enterprise-portal-using-arcgis-api" class="md-nav__link">
    Connecting to ArcGIS Enterprise Portal using ArcGIS API
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#databricks-url" class="md-nav__link">
    Databricks URL
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#azure-portal" class="md-nav__link">
    Azure Portal
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#getting-started" class="md-nav__link">
    Getting Started
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creating-a-cluster" class="md-nav__link">
    Creating a Cluster
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creating-a-notebook" class="md-nav__link">
    Creating a Notebook
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ingesting-data-into-databricks" class="md-nav__link">
    Ingesting Data into Databricks
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#adding-data-to-databricks" class="md-nav__link">
    Adding Data to Databricks
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#reading-mounted-files" class="md-nav__link">
    Reading Mounted Files
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#changing-notebook-default-language" class="md-nav__link">
    Changing Notebook Default Language
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mixing-notebook-languages" class="md-nav__link">
    Mixing Notebook Languages
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#starting-a-databricks-cluster" class="md-nav__link">
    Starting a Databricks Cluster
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#installing-libraries-in-notebooks" class="md-nav__link">
    Installing Libraries in Notebooks
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#learn-more-caes-guidebook" class="md-nav__link">
    Learn More; CAE's Guidebook
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#microsoft-documentation" class="md-nav__link">
    Microsoft Documentation
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_10" >
      
      
      
        <label class="md-nav__link" for="__nav_10" id="__nav_10_label" tabindex="0">
          Knowledge Centre
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_10_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_10">
          <span class="md-nav__icon md-icon"></span>
          Knowledge Centre
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../intro/" class="md-nav__link">
        Simple GIS Intro
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../conda/" class="md-nav__link">
        Anaconda & Python
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../sdmx/" class="md-nav__link">
        SDMX
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../resources/" class="md-nav__link">
        Training and Tutorials
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#connecting-to-arcgis-enterprise-portal-using-arcgis-api" class="md-nav__link">
    Connecting to ArcGIS Enterprise Portal using ArcGIS API
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#databricks-url" class="md-nav__link">
    Databricks URL
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#azure-portal" class="md-nav__link">
    Azure Portal
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#getting-started" class="md-nav__link">
    Getting Started
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creating-a-cluster" class="md-nav__link">
    Creating a Cluster
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creating-a-notebook" class="md-nav__link">
    Creating a Notebook
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ingesting-data-into-databricks" class="md-nav__link">
    Ingesting Data into Databricks
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#adding-data-to-databricks" class="md-nav__link">
    Adding Data to Databricks
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#reading-mounted-files" class="md-nav__link">
    Reading Mounted Files
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#changing-notebook-default-language" class="md-nav__link">
    Changing Notebook Default Language
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mixing-notebook-languages" class="md-nav__link">
    Mixing Notebook Languages
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#starting-a-databricks-cluster" class="md-nav__link">
    Starting a Databricks Cluster
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#installing-libraries-in-notebooks" class="md-nav__link">
    Installing Libraries in Notebooks
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#learn-more-caes-guidebook" class="md-nav__link">
    Learn More; CAE's Guidebook
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#microsoft-documentation" class="md-nav__link">
    Microsoft Documentation
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="what-is-cae">What is CAE</h1>
<p>The <a href="https://statcan.github.io/cae-eac/en/">Collaborative analytics Environment</a> (CAE) provides cloud services for data ingestion, transformation and preparation, as well as data exploration and computation. It includes tools for collaborative analytics, machine learning environments, and data visualization capabilities. </p>
<h2 id="connecting-to-arcgis-enterprise-portal-using-arcgis-api">Connecting to ArcGIS Enterprise Portal using ArcGIS API</h2>
<details class="success"><summary>Prerequisite</summary><p>Client Id from the DAaaS ArcGIS Enterprise Portal for OAuth2.0 authentication (if accessing a Enterprise Feature Service)</p>
</details>
<p>Your project group will be provided with a Client ID upon onboarding which will be used to connect to the ArcGIS Enterprise Portal. Paste the Client ID in-between the quotations <br/><code>client_id=' '</code>. 
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="n">gis</span> <span class="o">=</span> <span class="n">GIS</span><span class="p">(</span><span class="s2">&quot;https://geoanalyticsdev.cloud.statcan.ca/portal&quot;</span><span class="p">,</span> <span class="n">client_id</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Successfully logged in as: &quot;</span> <span class="o">+</span> <span class="n">gis</span><span class="o">.</span><span class="n">properties</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">username</span><span class="p">)</span>
</code></pre></div>
The output will redirect you to a web page where you can login to the Portal using the StatCan Azure Login option. After successful login, you will receive a code to sign in using SAML. Paste this code into the output. </p>
<p><img alt="OAuth2 Approval" src="../images/OAuth2Key.png" /></p>
<h2 id="databricks-url">Databricks URL</h2>
<ol>
<li>
<p>Navigate to https://canadacentral.azuredatabricks.net/, sign in with your cloud account credentials, and select the Databricks workspace that was created for you.  </p>
<p><img alt="Databricks URL" src="../images/DatabricksSelect.png" /></p>
</li>
</ol>
<h2 id="azure-portal">Azure Portal</h2>
<ol>
<li>
<p>In the Azure Portal Search box, search for <strong>Databricks</strong>.  </p>
<p><img alt="Azure Portal Search" src="../images/DatabricksPortalSearch.png" />  </p>
</li>
<li>
<p>You should then see a list of the Databricks workspaces you were given permission to access.  </p>
<p><img alt="Databricks workspaces List" src="../images/DatabricksPortalList.png" /></p>
</li>
</ol>
<h2 id="getting-started">Getting Started</h2>
<p>Once inside Databricks you can create a new notebook or open an existing notebook. See <a href="https://docs.microsoft.com/en-us/azure/azure-databricks/quickstart-create-databricks-workspace-portal#run-a-spark-sql-job">First Access to Databricks</a> for more information.</p>
<h2 id="creating-a-cluster">Creating a Cluster</h2>
<p>Since you do not have permission to create a cluster, please send a <a href="https://cae-eac.slack.com">slack</a> message if a cluster has not been created for you or if you require changes to your cluster.</p>
<p><strong>Note:</strong> You must have a cluster running before you can run code inside your notebook. See below for information on how to start a cluster.</p>
<h2 id="creating-a-notebook">Creating a Notebook</h2>
<ul>
<li>
<p>One way to create a notebook is to click on the <strong>New Notebook</strong> link from the main Databricks page. You can then provide a name for your notebook and select the default notebook language.</p>
</li>
<li>
<p>From the available list of clusters, select the cluster to which you wish to attach your notebook.</p>
<p><img alt="Start a notebook" src="../images/DataBrickCreateNotebook.png" /></p>
</li>
<li>
<p>To start or change a cluster from within a notebook, open the notebook and click on the cluster drop down found at the top right of the notebook. You can then start the cluster or detach it and attach a different one.  </p>
</li>
</ul>
<h2 id="ingesting-data-into-databricks">Ingesting Data into Databricks</h2>
<p>Data can be mounted or uploaded to the Databricks File System (DBFS), which is storage specific to the Databricks workspace. You can read data from a data source or even upload a data file (e.g. CSV) directly to the DBFS.</p>
<p><strong>Note:</strong> The internal data lake container for your environment has already been mounted for you and you can work with the container directly. Please send a <a href="https://cae-eac.slack.com">Slack</a> message if you don't know the name of your mounted data lake container.</p>
<h2 id="adding-data-to-databricks">Adding Data to Databricks</h2>
<p><img alt="Where to import data" src="../images/DataBricksImportData.png" /></p>
<h2 id="reading-mounted-files">Reading Mounted Files</h2>
<p><img alt="Access files in your container as if they were local files" src="../images/Accessmountedfile.png" /></p>
<p>Example:
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>%python
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>testData = spark.read.format(&#39;csv&#39;).options(header=&#39;true&#39;, inferSchema=&#39;true&#39;).load(&#39;/mnt/mad-du/incoming/age-single-years-2018-census-csv.csv&#39;)
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a>
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a>display(testData)
</code></pre></div></p>
<h2 id="changing-notebook-default-language">Changing Notebook Default Language</h2>
<p><img alt="Change notebook languange" src="../images/changelanguage.png" /></p>
<p><img alt="and then" src="../images/changelanguage2.png" /></p>
<h2 id="mixing-notebook-languages">Mixing Notebook Languages</h2>
<p>You can override the default language by specifying the language magic command % at the beginning of a cell. The supported magic commands are: %python, %r, %scala, and %sql.</p>
<p><em>Note:</em><br />
When you invoke a language magic command, the command is dispatched to the REPL in the execution context for the notebook. Variables defined in one language (and hence in the REPL for that language) are not available in the REPL of another language. REPLs can share state only through external resources such as files in DBFS or objects in object storage.    </p>
<p>Notebooks also support a few auxiliary magic commands:<br />
%sh: Allows you to run shell code in your notebook. To fail the cell if the shell command has a non-zero exit status, add the -e option. This command runs only on the Apache Spark driver, and not the workers. To run a shell command on all nodes, use an init script.<br />
%fs: Allows you to use dbutils filesystem commands.<br />
%md: Allows you to include various types of documentation, including text, images, and mathematical formulas and equations.  </p>
<h2 id="starting-a-databricks-cluster">Starting a Databricks Cluster</h2>
<ol>
<li>
<p>Click on the cluster drop-down list.</p>
</li>
<li>
<p>Select a cluster from the list.</p>
</li>
<li>
<p>Click on the <strong>Start Cluster</strong> link.  </p>
<p><img alt="Where to start a Databricks cluster" src="../images/DataBricksStartCluster.png" />  </p>
</li>
</ol>
<h2 id="installing-libraries-in-notebooks">Installing Libraries in Notebooks</h2>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>The DAaaS team is working to streamline this processes, exciting changes are coming soon!</p>
</div>
<p>Use the following commands to install a library in a notebook session:</p>
<p>Python: 
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="n">dbutils</span><span class="o">.</span><span class="n">library</span><span class="o">.</span><span class="n">installPyPI</span><span class="p">(</span><span class="s2">&quot;pypipackage&quot;</span><span class="p">,</span> <span class="n">version</span><span class="o">=</span><span class="s2">&quot;version&quot;</span><span class="p">,</span> <span class="n">repo</span><span class="o">=</span><span class="s2">&quot;repo&quot;</span><span class="p">,</span> <span class="n">extras</span><span class="o">=</span><span class="s2">&quot;extras&quot;</span><span class="p">)</span>
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="n">dbutils</span><span class="o">.</span><span class="n">library</span><span class="o">.</span><span class="n">restartPython</span><span class="p">()</span> <span class="c1"># Removes Python state, but some libraries might not work without calling this function</span>
</code></pre></div>
R Code:
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="nf">install.packages</span><span class="p">(</span><span class="s">&quot;library&quot;</span><span class="p">)</span><span class="w"> </span>
</code></pre></div></p>
<h2 id="learn-more-caes-guidebook">Learn More; <a href="https://statcan.github.io/cae-eac/en/DataBricks/">CAE's Guidebook</a></h2>
<h2 id="microsoft-documentation">Microsoft Documentation</h2>
<ul>
<li><a href="https://docs.microsoft.com/en-us/azure/azure-databricks/quickstart-create-databricks-workspace-portal#run-a-spark-sql-job">First Access to Databricks</a>  </li>
<li><a href="https://azure.microsoft.com/en-us/resources/videos/connect-2017-introduction-to-azure-databricks">For more information on Databricks</a>  </li>
<li><a href="https://docs.databricks.com/dev-tools/databricks-connect.html">Databricks Connect</a></li>
<li><a href="https://docs.microsoft.com/en-us/azure/databricks/notebooks/notebooks-python-libraries">Install Libraries in Current Notebook Session</a>  </li>
<li><a href="https://docs.microsoft.com/en-us/azure/databricks/libraries#:~:text=Azure%20Databricks%20supports%20three%20library,its%20path%20in%20the%20workspace">Library Management for Admins</a>  </li>
</ul>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Â© 2022 Statistics Canada; DAS GAE Early Adopter's Guide; Version 0.0.12
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "..", "features": ["tabs"], "search": "../assets/javascripts/workers/search.db81ec45.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.a00a7c5e.min.js"></script>
      
    
  </body>
</html>